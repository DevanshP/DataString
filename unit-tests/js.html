<!DOCTYPE html>
<html lang="en">
<head>
	<title>DataString.js Unit Tests</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script type="text/javascript" src="qunit/qunit.js"></script>
	<script type="text/javascript" src="../src/DataString.js"></script>
	<script type="text/javascript" src="../src/DataString.Aba.js"></script>
	<script type="text/javascript" src="../src/DataString.Cc.js"></script>
	<script type="text/javascript" src="../src/DataString.Dollars.js"></script>
	<script type="text/javascript" src="../src/DataString.PhoneUs10.js"></script>
	<link type="text/css" rel="stylesheet" href="qunit/DataString.css" media="screen" />
</head>
<body>

<input type="text" name="cc" id="cc" value="4111111111111111" /><br />
<input type="text" name="bucks" id="bucks" value="123456.55" /><br />
<input type="text" name="bucks2" id="bucks2" value="bucks" /><br />
<div style="clear: both;"></div>

<div id="unit-output">
	<h1 id="qunit-header">DataString.js Unit Tests</h1>
	<h2 id="qunit-banner"></h2>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"><li></li></ol>
</div>

<script type="text/javascript">

DataString.Cc.autoFormatInput('cc');
DataString.Dollars.autoFormatInput('bucks');
DataString.Dollars.keyMaskInput('bucks2')

String.prototype.getCheckdigit = function() {
	var i = 0, sum = 0;
	while (i < this.length) {
		sum += ((i % 2) == 0 ? 2 : 1) * parseInt(this[i++], 10);
	}
	return 10 - (sum % 10);
}

	with (QUnit) {

		test('DataString.Dollars', function() {
			var ios = [
				['a','$0.00'],
				['0','$0.00'],
				['-0','$0.00'],
				['-1','$-1.00'],
				['123','$123.00'],
				['$123','$123.00'],
				['$1123','$1,123.00'],
				['$1,123','$1,123.00'],
				['1234567.123','$1,234,567.12']
			];
			var i = 0, io;
			while ((io = ios[i++])) {
				equal(new DataString.Dollars(io[0]).format(), io[1], io[2]);
			}
		});

		test('DataString.Cc', function() {
			var ios = [
				['4111111111111111','4111-1111-1111-1111'],
				['4111 1111 1111 1111','4111-1111-1111-1111'],
				['4111-1111-1111-1111','4111-1111-1111-1111'],
				['4111x1111x1111_1111','4111-1111-1111-1111'],
				['371111111111119','3711-111111-11111'],
				['3711 111111 11119','3711-111111-11111']
			];
			var i = 0, io;
			while ((io = ios[i++])) {
				equal(new DataString.Cc(io[0]).format(), io[1], io[2]);
			}
			ok(new DataString.Cc('4111-1111-1111-1111').isValid(), 'good checksum ok');
			ok(!new DataString.Cc('4111-1111-1111-1112').isValid(), 'bad checksum invalid');

			ios = [
				['341111111111112','amex'],
				['351111111111111','amex'],
				['361111111111110','amex'],
				['371111111111119','amex'],
				['4111111111111111','visa'],
				['5111111111111119','mc'],
				['6011111111111118','disc'],
				['0011111111111111',undefined]
			];
			i = 0;
			while ((io = ios[i++])) {
				equal(new DataString.Cc(io[0]).getType(), io[1], io[2]);
			}
		});

	}

</script>

</body>
</html>